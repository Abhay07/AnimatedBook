<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<style>

body{
margin:0;
background-image:url('img.svg');
background-size:100%;
}

.tag {
    border: 2px solid white;
    position: absolute;
    padding: 10px 60px;
    top: 90px;
    left: -80px;
    background: black;
    color: white;
    box-shadow: 0px 5px 5px black;
    transform-origin: 50% 50%;
    transform: rotate(-45deg);
}
.tag a {
    text-decoration: none;
    color: white;
}
.wrapper {
    width: 900px;
    height: 600px;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: auto;
}
.cover {
    width: 450px;
    height: 600px;
    background: #86BBD5;
    position: absolute;
    right: 4;
    top: 0;
    border-left: 7px dotted white;
    transform-origin: 0% 50%;
    transform: rotateY(10deg);
    transition: all 1.5s,background 2s,z-index 2s step-end;
    perspective: 0px;
	z-index:1;
}
.cover:before {
    content: '';
    font-family: Arial;
    color: white;
    font-size: 70px;
    position: relative;
    top: 8%;
    left: 15%;
    transition: opacity 0.75s;
    opacity: 1;
}
.first-page,.second-page,.third-page {
    width: 464px;
    height: 600px;
    background: white;
    position: absolute;
    right: 0;
    top: 0;
    transform: rotateY(10deg);
    transform-origin: 0% 50%;
    transition: transform 2s,z-index 2s step-end;
    perspective: 0px;
    box-shadow: inset 10px 0px 40px -20px black;
    border: 1px solid #cccccc;
    border-left: none;
	z-index:1;
}
.svgContainer{
width: 464px;
height: 600px;
position: absolute;
right: 0;
top: 0;
z-index:2;
}
.third-page {
    box-shadow: 10px 5px 10px 0px #C5C5C5;
}

.info {
    width: 1000px;
    margin: auto;
    display: block;
    text-align: center;
    position: relative;
    top: 40px;
    font-size: 25px;
    color:#173957;
	font-family:Arial;
}

.turn{
width:450px;
height:600px;
background:transparent;
position:absolute;
right:0;
top:0;
border:none;
z-index:999;
}

#turn_btn_forward{
right:0;
}

#turn_btn_back{
left:0;
}

.turn-forward{
transform:rotateY(-180deg) perspective(800px);
z-index:0;
}
.turn-backward{
transition:all 2s,z-index 2s step-start;
}
.cover.turn-forward{
z-index:-1;
}
.stopAnim{
transition:none;
}
.hiddenElem{
visibility:hidden;
}
.drawPath{
transition:none;
}
.drawPath.animate{
transition:stroke-dashoffset 1s ease-in-out;
}
.turn.disable{
display:none;
}
</style>
</head>
<body>
<div class="info">CLICK ON THE PAGES TO TURN</div>
<div class="wrapper">
<input id="control" type="checkbox" style="visibility:hidden;"/>
<div class="third-page"></div>
<div class="second-page"></div>
<div class="first-page"></div>
<div class="cover">

</div>
<div class="svgContainer">

</div>
<a id="turn_btn_forward" class="turn" href="#" style=""></a>
<a id="turn_btn_back" class="turn" href="#" style="width:450px;height:600px;background:transparent;position:absolute;left:0;top:0;border:none;z-index:999"></a>
</div>

</body>
<script>
$(window).load(function(){
var i=0,status="";
drawFun(i);
$('.wrapper').css('transform','scale('+0.001*$(document).height()+')');
$(window).resize(function(){$('.wrapper').css('transform','scale('+0.001*$(document).height()+')')});
function turnForward()
	 {
	     $('.turn').removeClass('disable').addClass('disable');
		 $('.svgContainer').removeClass('hiddenElem').addClass('hiddenElem');
		if(i==0)
		{
			$('.cover').removeClass('turn-backward').addClass('turn-forward');
		}
		else if(i==1)
		{
			$('.first-page').removeClass('turn-backward').addClass('turn-forward');
		}
		else
		{
			$('.second-page').removeClass('turn-backward').removeClass('stopAnim').addClass('turn-forward');
			setTimeout(function(){
			$('.second-page').addClass('stopAnim').removeClass('turn-forward');
			},2000);
		}
		i++;
		setTimeout(function(){ $('.turn').removeClass('disable');},2000);
		setTimeout(function(){drawFun(i);},500);
	}
	
function turnBackward(){
		$('.turn').removeClass('disable').addClass('disable');
		$('.svgContainer').removeClass('hiddenElem').addClass('hiddenElem');;
		if(i==0)
		{
			console.log('no page to turn');
		}
		else if(i==1)
		{
			$('.cover').addClass('turn-backward').removeClass('turn-forward');
			i--;
		}
		else if(i==2)
		{
			$('.first-page').addClass('turn-backward').removeClass('turn-forward');
			i--;
		}
		else
		{
			$('.second-page').removeClass('stopAnim').addClass('stopAnim turn-forward');
			setTimeout(function(){
			$('.second-page').removeClass('stopAnim').addClass('turn-backward').removeClass('turn-forward');},5);
			i--;
		}
		setTimeout(function(){ $('.turn').removeClass('disable');},2000);
		setTimeout(function(){drawFun(i);},1000);
	}
$('#turn_btn_forward').click(function(){turnForward();});
$('#turn_btn_back').click(function(){turnBackward();});
function drawFun(a){
	if(a==0)
	{$('.svgContainer').html('').load('cat.svg',function(){svgLoaded();});}
	else if(a%5==4)
	$('.svgContainer').html('').load('mouse.svg',function(){svgLoaded();});
	else if(a%5==3)
	$('.svgContainer').load('phone.svg',function(){svgLoaded();});
	else if(a%5==2)
	$('.svgContainer').load('bottle.svg',function(){svgLoaded();});
	else if(a%5==1)
	$('.svgContainer').load('ball.svg',function(){svgLoaded();});
	else if(a%5==0)
	$('.svgContainer').load('cat.svg',function(){svgLoaded();});
	else
	$('.svgContainer').load('cat.svg',function(){svgLoaded();});
}
function svgLoaded(){
	$('.svgContainer').removeClass('hiddenElem');
	var paths = $('svg path');
	var length;
	for(var n=0;n<paths.length;n++)
	{
		length = paths[n].getTotalLength();
		paths[n].style.strokeDashoffset=paths[n].style.strokeDasharray=length;
	}
	var m=0;
	function startDrawing(){
		length = paths[m].getTotalLength();
		paths[m].setAttribute('class','drawPath');
		paths[m].setAttribute('fill','none');
		paths[m].getBoundingClientRect();
		paths[m].style.transition=paths[m].style.WebkitTransition="stroke-dashoffset "+0.3*length/120+"s ease-in-out";
		paths[m].getBoundingClientRect();
		paths[m].style.strokeDashoffset="0px";
		m++;
		if(m<paths.length)
		setTimeout(function(){startDrawing();},300*length/120);
	}
	startDrawing();
}
});
</script>
</html>
